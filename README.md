# 🌡️ 기상청 온도 데이터 다운로드 웹 애플리케이션

기상청 API를 활용하여 서울 관측소의 온도 및 습도 데이터를 조회하고 CSV 파일로 다운로드할 수 있는 웹 애플리케이션입니다.

## ✨ 주요 기능

- 📅 원하는 기간의 기상 데이터 조회 (최대 3주)
- 🌡️ 온도 및 습도 데이터
- 📥 CSV 파일 형식으로 다운로드
- 🎨 직관적이고 현대적인 UI
- 📍 서울 관측소 데이터 (지점번호: 108, 서울특별시 종로구 송월길 52)

## 📋 CSV 파일 형식

다운로드되는 CSV 파일은 다음과 같은 형식을 가집니다:

```csv
id,temperature,humidity,recorded_at,location
1,2.8,57,2015-12-11 01:00:00,서울시
2,1.6,57,2015-12-14 00:00:00,서울시
...
```

- **id**: 데이터 행 번호
- **temperature**: 기온 (°C)
- **humidity**: 습도 (%)
- **recorded_at**: 관측 시간 (YYYY-MM-DD HH:MM:SS)
- **location**: 관측 지점 (서울시)

## 🚀 설치 및 실행 방법

### 1. 사전 요구사항

- Node.js (v14 이상)
- npm 또는 yarn
- 기상청 API Hub 인증키

### 2. 기상청 API 키 발급

1. [기상청 API Hub](https://apihub.kma.go.kr) 접속
2. 회원가입 및 로그인
3. API 신청하기 → "지상관측자료 조회서비스" 신청
4. 발급받은 인증키(authKey) 확인

### 3. 프로젝트 설치

```bash
# 의존성 패키지 설치
npm install
```

### 4. 서버 실행

```bash
# 프로덕션 모드
npm start

# 개발 모드 (파일 변경시 자동 재시작)
npm run dev
```

### 5. 웹 브라우저에서 접속

```
http://localhost:3000
```

## 📖 사용 방법

1. **시작 날짜 선택**: 데이터 조회를 시작할 날짜를 선택합니다 (00:00부터).

2. **종료 날짜 선택**: 데이터 조회를 종료할 날짜를 선택합니다 (24:00 자정까지).
   - 최대 3주(21일)까지 조회 가능

3. **데이터 다운로드**: "📥 데이터 다운로드" 버튼을 클릭하여 CSV 파일을 다운로드합니다.

4. **지점 테스트 도구**: 페이지 하단의 테스트 도구를 사용하여 다른 관측소의 데이터 가용성을 확인할 수 있습니다.

## 🛠️ 기술 스택

- **Backend**: Node.js, Express.js
- **HTTP Client**: Axios
- **Frontend**: HTML5, CSS3, Vanilla JavaScript
- **API**: 기상청 지상관측자료 조회서비스

## 📁 프로젝트 구조

```
외기온도 기상청 API/
├── server.js           # Express 서버 및 API 프록시
├── package.json        # 프로젝트 설정 및 의존성
├── README.md          # 프로젝트 문서
└── public/            # 정적 파일
    ├── index.html     # 메인 페이지
    └── app.js         # 클라이언트 사이드 JavaScript
```

## 🔧 주요 설정

### 환경 변수 설정

프로젝트 루트에 `.env` 파일을 생성하고 API 키를 설정하세요:

```env
KMA_API_KEY=your_api_key_here
PORT=3000
```

### 포트 변경

기본 포트는 3000입니다. 변경하려면 환경 변수를 설정하세요:

```bash
PORT=8080 npm start
```

### 관측소 정보

**현재 설정된 관측소**:
- **지점번호**: 108
- **지점명**: 서울
- **위치**: 서울특별시 종로구 송월길 52
- **위도/경도**: 37.5714°N, 126.9658°E

다른 지점을 사용하려면 `server.js` 파일의 `stnNumber` 값을 변경하세요.

**주요 지점 번호**:
- 108: 서울 (서울특별시 종로구)
- 112: 인천 (인천광역시 강화군)
- 159: 부산 (부산광역시 동래구)
- 133: 대전 (대전광역시 유성구)
- 143: 대구 (대구광역시 동구)
- 156: 광주 (광주광역시 북구)

## ⚠️ 주의사항

- API 호출 횟수 제한이 있을 수 있으니 기상청 API 정책을 확인하세요.
- 과거 데이터의 경우 일부 값이 누락될 수 있습니다 (-9 또는 -9.0은 결측치).
- 네트워크 상태에 따라 데이터 조회에 시간이 걸릴 수 있습니다.

## 🐛 문제 해결

### API 호출 실패

- API 키가 올바른지 확인하세요.
- 네트워크 연결 상태를 확인하세요.
- 기상청 API 서비스 상태를 확인하세요.

### 데이터가 없음

- 선택한 날짜 범위에 데이터가 존재하는지 확인하세요.
- 3주 이내의 기간을 선택했는지 확인하세요.

### 서버 실행 오류

```bash
# node_modules 삭제 후 재설치
rm -rf node_modules
npm install
```

## 📞 지원

문제가 발생하거나 문의사항이 있으시면 이슈를 등록해주세요.

## 📄 라이선스

MIT License

---

Made with ❤️ for better weather data access

